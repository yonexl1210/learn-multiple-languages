<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Break Boundaries，Learn Smart</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #f5f5f5;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23e0e0e0' fill-opacity='0.4' fill-rule='evenodd'/%3E%3C/svg%3E");
        }
        
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .tab-active {
            border-bottom: 3px solid #4F46E5;
            color: #4F46E5;
        }
        
        .language-flag {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            margin-right: 8px;
            display: inline-block;
            vertical-align: middle;
        }
        
        .word-card {
            transition: all 0.3s ease;
        }
        
        .word-card:hover {
            transform: translateY(-3px);
        }
        
        .learning-status {
            font-size: 0.75rem;
            padding: 2px 8px;
            border-radius: 12px;
            display: inline-block;
        }
        
        .status-learning {
            background-color: #FEF3C7;
            color: #92400E;
        }
        
        .status-mastered {
            background-color: #D1FAE5;
            color: #065F46;
        }
        
        .translation-pair {
            border-left: 3px solid #4F46E5;
            padding-left: 15px;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <header class="mb-10">
            <h1 class="text-3xl font-bold text-gray-800">多语言学习系统</h1>
            <p class="text-gray-600">学习泰语、越南语、日语、韩语、英语和西班牙语</p>
        </header>

        <div class="mb-6">
            <div class="flex border-b border-gray-200">
                <button class="py-3 px-6 font-medium tab-active" id="tab-add-word">单词添加</button>
                <button class="py-3 px-6 font-medium text-gray-600 hover:text-gray-900" id="tab-study-mode">学习模式</button>
                <button class="py-3 px-6 font-medium text-gray-600 hover:text-gray-900" id="tab-data-management">数据整理</button>
                <button class="py-3 px-6 font-medium text-gray-600 hover:text-gray-900" id="tab-translation-mode">对译模式</button>
            </div>
        </div>

        <!-- 单词添加标签页 -->
        <div id="add-word-panel" class="tab-panel">
            <div class="card p-6 mb-6">
                <h2 class="text-xl font-semibold mb-4">添加新单词</h2>
                
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2">选择语言</label>
                    <div class="grid grid-cols-3 md:grid-cols-6 gap-3">
                        <button class="language-btn flex items-center justify-center p-3 border rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500" data-lang="thai">
                            <span class="language-flag" style="background-color: #ED1C24;"></span>
                            泰语
                        </button>
                        <button class="language-btn flex items-center justify-center p-3 border rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500" data-lang="vietnamese">
                            <span class="language-flag" style="background-color: #FF0000;"></span>
                            越南语
                        </button>
                        <button class="language-btn flex items-center justify-center p-3 border rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500" data-lang="japanese">
                            <span class="language-flag" style="background-color: #BC002D;"></span>
                            日语
                        </button>
                        <button class="language-btn flex items-center justify-center p-3 border rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500" data-lang="korean">
                            <span class="language-flag" style="background-color: #003478;"></span>
                            韩语
                        </button>
                        <button class="language-btn flex items-center justify-center p-3 border rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500" data-lang="english">
                            <span class="language-flag" style="background-color: #012169;"></span>
                            英语
                        </button>
                        <button class="language-btn flex items-center justify-center p-3 border rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500" data-lang="spanish">
                            <span class="language-flag" style="background-color: #AA151B;"></span>
                            西班牙语
                        </button>
                    </div>
                </div>
                
                <div class="mb-4">
                    <label for="word-input" class="block text-gray-700 mb-2">单词</label>
                    <input type="text" id="word-input" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="输入单词">
                </div>
                
                <div class="mb-4">
                    <label for="translation-input" class="block text-gray-700 mb-2">中文翻译</label>
                    <input type="text" id="translation-input" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="输入中文翻译">
                </div>
                
                <div class="mb-4">
                    <label for="example-input" class="block text-gray-700 mb-2">例句（可选）</label>
                    <textarea id="example-input" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" rows="3" placeholder="输入例句"></textarea>
                </div>
                
                <div class="mb-4">
                    <label for="note-input" class="block text-gray-700 mb-2">备注（可选）</label>
                    <textarea id="note-input" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" rows="2" placeholder="输入备注"></textarea>
                </div>
                
                <button id="add-word-btn" class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                    添加单词
                </button>
            </div>
            
            <div class="card p-6">
                <h2 class="text-xl font-semibold mb-4">单词列表</h2>
                
                <div class="mb-4">
                    <div class="flex">
                        <input type="text" id="word-search" class="flex-grow px-4 py-2 border rounded-l-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="搜索单词...">
                        <button id="search-btn" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-r-lg hover:bg-gray-300">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
                
                <div id="word-list" class="space-y-4">
                    <!-- 单词列表将在这里动态生成 -->
                </div>
            </div>
        </div>

        <!-- 学习模式标签页 -->
        <div id="study-mode-panel" class="tab-panel hidden">
            <div class="card p-6 mb-6">
                <h2 class="text-xl font-semibold mb-4">学习设置</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-gray-700 mb-2">选择语言</label>
                        <select id="study-language" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            <option value="all">所有语言</option>
                            <option value="thai">泰语</option>
                            <option value="vietnamese">越南语</option>
                            <option value="japanese">日语</option>
                            <option value="korean">韩语</option>
                            <option value="english">英语</option>
                            <option value="spanish">西班牙语</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 mb-2">学习数量</label>
                        <select id="study-count" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            <option value="5">5个单词</option>
                            <option value="10">10个单词</option>
                            <option value="15">15个单词</option>
                            <option value="20">20个单词</option>
                            <option value="30">30个单词</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 mb-2">学习模式</label>
                        <select id="study-mode" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            <option value="foreign-to-chinese">外语 → 中文</option>
                            <option value="chinese-to-foreign">中文 → 外语</option>
                            <option value="mixed">混合模式</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 mb-2">学习状态</label>
                        <select id="study-status" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            <option value="all">所有单词</option>
                            <option value="learning">学习中</option>
                            <option value="mastered">已掌握</option>
                        </select>
                    </div>
                </div>
                
                <button id="start-study-btn" class="mt-6 bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                    开始学习
                </button>
            </div>
            
            <div id="study-area" class="card p-6 hidden">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-semibold">学习进度: <span id="study-progress">1/10</span></h2>
                    <button id="exit-study-btn" class="text-gray-600 hover:text-gray-900">
                        <i class="fas fa-times"></i> 退出学习
                    </button>
                </div>
                
                <div id="study-card" class="bg-gray-50 rounded-xl p-8 mb-6 text-center">
                    <div id="study-word" class="text-3xl font-bold mb-4"></div>
                    <div id="study-translation" class="text-xl text-gray-600 mb-6 hidden"></div>
                    <div id="study-example" class="text-gray-500 mb-6 hidden"></div>
                    <div id="study-note" class="text-gray-500 mb-6 hidden"></div>
                    
                    <div class="flex justify-center space-x-4">
                        <button id="play-sound-btn" class="bg-indigo-100 text-indigo-700 px-4 py-2 rounded-lg hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            <i class="fas fa-volume-up"></i> 播放发音
                        </button>
                        <button id="show-answer-btn" class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            显示答案
                        </button>
                    </div>
                </div>
                
                <div id="study-controls" class="hidden">
                    <div class="flex justify-between mb-6">
                        <div>
                            <span class="text-gray-700 mr-2">学习状态:</span>
                            <button id="mark-learning-btn" class="learning-status status-learning">
                                学习中
                            </button>
                            <button id="mark-mastered-btn" class="learning-status status-mastered ml-2">
                                已掌握
                            </button>
                        </div>
                    </div>
                    
                    <div class="flex justify-between">
                        <button id="prev-word-btn" class="bg-gray-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500">
                            上一题
                        </button>
                        <button id="next-word-btn" class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            下一题
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 数据整理标签页 -->
        <div id="data-management-panel" class="tab-panel hidden">
            <div class="card p-6 mb-6">
                <h2 class="text-xl font-semibold mb-4">数据管理</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="text-lg font-medium mb-3">导入数据</h3>
                        <div class="mb-4">
                            <label class="block text-gray-700 mb-2">选择文件格式</label>
                            <div class="flex space-x-4">
                                <label class="inline-flex items-center">
                                    <input type="radio" name="import-format" value="json" class="form-radio" checked>
                                    <span class="ml-2">JSON</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="radio" name="import-format" value="csv" class="form-radio">
                                    <span class="ml-2">CSV</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label for="import-file" class="block text-gray-700 mb-2">选择文件</label>
                            <input type="file" id="import-file" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        </div>
                        
                        <button id="import-btn" class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                            导入数据
                        </button>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-medium mb-3">导出数据</h3>
                        <div class="mb-4">
                            <label class="block text-gray-700 mb-2">选择文件格式</label>
                            <div class="flex space-x-4">
                                <label class="inline-flex items-center">
                                    <input type="radio" name="export-format" value="json" class="form-radio" checked>
                                    <span class="ml-2">JSON</span>
                                </label>
                                <label class="inline-flex items-center">
                                    <input type="radio" name="export-format" value="csv" class="form-radio">
                                    <span class="ml-2">CSV</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-gray-700 mb-2">选择语言</label>
                            <select id="export-language" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                <option value="all">所有语言</option>
                                <option value="thai">泰语</option>
                                <option value="vietnamese">越南语</option>
                                <option value="japanese">日语</option>
                                <option value="korean">韩语</option>
                                <option value="english">英语</option>
                                <option value="spanish">西班牙语</option>
                            </select>
                        </div>
                        
                        <div class="flex space-x-3">
                            <button id="export-btn" class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                                导出数据
                            </button>
                            <button id="delete-all-btn" class="bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2">
                                删除所有数据
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card p-6">
                <h2 class="text-xl font-semibold mb-4">数据统计</h2>
                
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
                    <div class="bg-gray-50 p-4 rounded-lg text-center">
                        <div class="text-2xl font-bold text-indigo-600" id="total-words">0</div>
                        <div class="text-gray-600">总单词数</div>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg text-center">
                        <div class="text-2xl font-bold text-yellow-600" id="learning-words">0</div>
                        <div class="text-gray-600">学习中</div>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg text-center">
                        <div class="text-2xl font-bold text-green-600" id="mastered-words">0</div>
                        <div class="text-gray-600">已掌握</div>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg text-center">
                        <div class="text-2xl font-bold text-red-600" id="thai-words">0</div>
                        <div class="text-gray-600">泰语</div>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg text-center">
                        <div class="text-2xl font-bold text-blue-600" id="vietnamese-words">0</div>
                        <div class="text-gray-600">越南语</div>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg text-center">
                        <div class="text-2xl font-bold text-purple-600" id="japanese-words">0</div>
                        <div class="text-gray-600">日语</div>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg text-center">
                        <div class="text-2xl font-bold text-green-600" id="korean-words">0</div>
                        <div class="text-gray-600">韩语</div>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg text-center">
                        <div class="text-2xl font-bold text-indigo-600" id="english-words">0</div>
                        <div class="text-gray-600">英语</div>
                    </div>
                    <div class="bg-gray-50 p-4 rounded-lg text-center">
                        <div class="text-2xl font-bold text-orange-600" id="spanish-words">0</div>
                        <div class="text-gray-600">西班牙语</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 对译模式标签页 -->
        <div id="translation-mode-panel" class="tab-panel hidden">
            <div class="card p-6 mb-6">
                <h2 class="text-xl font-semibold mb-4">添加对译文章</h2>
                
                <div class="mb-4">
                    <label for="translation-title" class="block text-gray-700 mb-2">文章标题</label>
                    <input type="text" id="translation-title" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="输入文章标题">
                </div>
                
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2">选择语言</label>
                    <select id="translation-language" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        <option value="thai">泰语</option>
                        <option value="vietnamese">越南语</option>
                        <option value="japanese">日语</option>
                        <option value="korean">韩语</option>
                        <option value="english">英语</option>
                        <option value="spanish">西班牙语</option>
                    </select>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="foreign-text" class="block text-gray-700 mb-2">外文内容</label>
                        <textarea id="foreign-text" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" rows="10" placeholder="输入外文内容"></textarea>
                    </div>
                    
                    <div>
                        <label for="chinese-text" class="block text-gray-700 mb-2">中文翻译</label>
                        <textarea id="chinese-text" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" rows="10" placeholder="输入中文翻译"></textarea>
                    </div>
                </div>
                
                <button id="add-translation-btn" class="mt-6 bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                    添加对译文章
                </button>
            </div>
            
            <div class="card p-6">
                <h2 class="text-xl font-semibold mb-4">对译文章列表</h2>
                
                <div class="mb-4">
                    <div class="flex">
                        <input type="text" id="translation-search" class="flex-grow px-4 py-2 border rounded-l-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="搜索文章标题...">
                        <button id="translation-search-btn" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-r-lg hover:bg-gray-300">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
                
                <div id="translation-list" class="space-y-4">
                    <!-- 对译文章列表将在这里动态生成 -->
                </div>
            </div>
        </div>
    </div>

    <!-- 编辑单词模态框 -->
    <div id="edit-word-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-lg p-6 w-full max-w-md">
            <h3 class="text-xl font-semibold mb-4">编辑单词</h3>
            
            <div class="mb-4">
                <label for="edit-word-input" class="block text-gray-700 mb-2">单词</label>
                <input type="text" id="edit-word-input" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
            </div>
            
            <div class="mb-4">
                <label for="edit-translation-input" class="block text-gray-700 mb-2">中文翻译</label>
                <input type="text" id="edit-translation-input" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
            </div>
            
            <div class="mb-4">
                <label for="edit-example-input" class="block text-gray-700 mb-2">例句</label>
                <textarea id="edit-example-input" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" rows="3"></textarea>
            </div>
            
            <div class="mb-4">
                <label for="edit-note-input" class="block text-gray-700 mb-2">备注</label>
                <textarea id="edit-note-input" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" rows="2"></textarea>
            </div>
            
            <div class="mb-4">
                <label class="block text-gray-700 mb-2">学习状态</label>
                <div class="flex space-x-4">
                    <label class="inline-flex items-center">
                        <input type="radio" name="edit-status" value="learning" class="form-radio">
                        <span class="ml-2">学习中</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="edit-status" value="mastered" class="form-radio">
                        <span class="ml-2">已掌握</span>
                    </label>
                </div>
            </div>
            
            <div class="flex justify-end space-x-3">
                <button id="cancel-edit-btn" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300">
                    取消
                </button>
                <button id="save-edit-btn" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700">
                    保存
                </button>
            </div>
        </div>
    </div>

    <!-- 查看对译文章模态框 -->
    <div id="view-translation-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-semibold" id="view-translation-title"></h3>
                <button id="close-translation-btn" class="text-gray-600 hover:text-gray-900">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="mb-4">
                <span class="text-gray-600">语言: </span>
                <span id="view-translation-language"></span>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h4 class="font-medium mb-2">外文内容</h4>
                    <div class="bg-gray-50 p-4 rounded-lg" id="view-foreign-text"></div>
                </div>
                
                <div>
                    <h4 class="font-medium mb-2">中文翻译</h4>
                    <div class="bg-gray-50 p-4 rounded-lg" id="view-chinese-text"></div>
                </div>
            </div>
            
            <div class="mt-6 flex justify-end space-x-3">
                <button id="edit-translation-btn" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700">
                    编辑
                </button>
                <button id="delete-translation-btn" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700">
                    删除
                </button>
            </div>
        </div>
    </div>

    <!-- 编辑对译文章模态框 -->
    <div id="edit-translation-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto">
            <h3 class="text-xl font-semibold mb-4">编辑对译文章</h3>
            
            <div class="mb-4">
                <label for="edit-translation-title-input" class="block text-gray-700 mb-2">文章标题</label>
                <input type="text" id="edit-translation-title-input" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
            </div>
            
            <div class="mb-4">
                <label class="block text-gray-700 mb-2">选择语言</label>
                <select id="edit-translation-language" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    <option value="thai">泰语</option>
                    <option value="vietnamese">越南语</option>
                    <option value="japanese">日语</option>
                    <option value="korean">韩语</option>
                    <option value="english">英语</option>
                    <option value="spanish">西班牙语</option>
                </select>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label for="edit-foreign-text" class="block text-gray-700 mb-2">外文内容</label>
                    <textarea id="edit-foreign-text" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" rows="10"></textarea>
                </div>
                
                <div>
                    <label for="edit-chinese-text" class="block text-gray-700 mb-2">中文翻译</label>
                    <textarea id="edit-chinese-text" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" rows="10"></textarea>
                </div>
            </div>
            
            <div class="mt-6 flex justify-end space-x-3">
                <button id="cancel-edit-translation-btn" class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300">
                    取消
                </button>
                <button id="save-edit-translation-btn" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700">
                    保存
                </button>
            </div>
        </div>
    </div>

    <script>
        // 语言映射
        const languageMap = {
            'thai': '泰语',
            'vietnamese': '越南语',
            'japanese': '日语',
            'korean': '韩语',
            'english': '英语',
            'spanish': '西班牙语'
        };

        // 语言代码映射（用于语音合成）
        const languageCodeMap = {
            'thai': 'th-TH',
            'vietnamese': 'vi-VN',
            'japanese': 'ja-JP',
            'korean': 'ko-KR',
            'english': 'en-US',
            'spanish': 'es-ES'
        };

        // 初始化数据
        let words = JSON.parse(localStorage.getItem('words')) || [];
        let translations = JSON.parse(localStorage.getItem('translations')) || [];
        let currentLanguage = 'thai'; // 默认语言
        let studyWords = [];
        let currentStudyIndex = 0;
        let editingWordId = null;
        let viewingTranslationId = null;
        let editingTranslationId = null;

        // 初始化页面
        document.addEventListener('DOMContentLoaded', function() {
            // 设置默认选中的语言
            document.querySelector(`.language-btn[data-lang="${currentLanguage}"]`).classList.add('bg-indigo-100', 'border-indigo-500');
            
            // 更新单词列表
            updateWordList();
            
            // 更新统计数据
            updateStatistics();
            
            // 更新对译文章列表
            updateTranslationList();
            
            // 绑定事件
            bindEvents();
        });

        // 绑定事件
        function bindEvents() {
            // 标签页切换
            document.getElementById('tab-add-word').addEventListener('click', () => switchTab('add-word'));
            document.getElementById('tab-study-mode').addEventListener('click', () => switchTab('study-mode'));
            document.getElementById('tab-data-management').addEventListener('click', () => switchTab('data-management'));
            document.getElementById('tab-translation-mode').addEventListener('click', () => switchTab('translation-mode'));
            
            // 语言选择
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.language-btn').forEach(b => {
                        b.classList.remove('bg-indigo-100', 'border-indigo-500');
                    });
                    this.classList.add('bg-indigo-100', 'border-indigo-500');
                    currentLanguage = this.dataset.lang;
                });
            });
            
            // 添加单词
            document.getElementById('add-word-btn').addEventListener('click', addWord);
            
            // 搜索单词
            document.getElementById('search-btn').addEventListener('click', searchWords);
            document.getElementById('word-search').addEventListener('keyup', function(e) {
                if (e.key === 'Enter') {
                    searchWords();
                }
            });
            
            // 开始学习
            document.getElementById('start-study-btn').addEventListener('click', startStudy);
            
            // 学习控制
            document.getElementById('exit-study-btn').addEventListener('click', exitStudy);
            document.getElementById('play-sound-btn').addEventListener('click', playStudyWordSound);
            document.getElementById('show-answer-btn').addEventListener('click', showAnswer);
            document.getElementById('prev-word-btn').addEventListener('click', prevWord);
            document.getElementById('next-word-btn').addEventListener('click', nextWord);
            document.getElementById('mark-learning-btn').addEventListener('click', () => markWordStatus('learning'));
            document.getElementById('mark-mastered-btn').addEventListener('click', () => markWordStatus('mastered'));
            
            // 数据管理
            document.getElementById('import-btn').addEventListener('click', importData);
            document.getElementById('export-btn').addEventListener('click', exportData);
            document.getElementById('delete-all-btn').addEventListener('click', deleteAllData);
            
            // 对译文章
            document.getElementById('add-translation-btn').addEventListener('click', addTranslation);
            document.getElementById('translation-search-btn').addEventListener('click', searchTranslations);
            document.getElementById('translation-search').addEventListener('keyup', function(e) {
                if (e.key === 'Enter') {
                    searchTranslations();
                }
            });
            
            // 模态框
            document.getElementById('cancel-edit-btn').addEventListener('click', closeEditWordModal);
            document.getElementById('save-edit-btn').addEventListener('click', saveEditWord);
            document.getElementById('close-translation-btn').addEventListener('click', closeViewTranslationModal);
            document.getElementById('edit-translation-btn').addEventListener('click', openEditTranslationModal);
            document.getElementById('delete-translation-btn').addEventListener('click', deleteTranslation);
            document.getElementById('cancel-edit-translation-btn').addEventListener('click', closeEditTranslationModal);
            document.getElementById('save-edit-translation-btn').addEventListener('click', saveEditTranslation);
        }

        // 切换标签页
        function switchTab(tabName) {
            // 隐藏所有标签页
            document.querySelectorAll('.tab-panel').forEach(panel => {
                panel.classList.add('hidden');
            });
            
            // 移除所有标签的激活状态
            document.querySelectorAll('[id^="tab-"]').forEach(tab => {
                tab.classList.remove('tab-active');
                tab.classList.add('text-gray-600', 'hover:text-gray-900');
            });
            
            // 显示选中的标签页
            document.getElementById(`${tabName}-panel`).classList.remove('hidden');
            
            // 激活选中的标签
            const activeTab = document.getElementById(`tab-${tabName}`);
            activeTab.classList.add('tab-active');
            activeTab.classList.remove('text-gray-600', 'hover:text-gray-900');
        }

        // 添加单词
        function addWord() {
            const word = document.getElementById('word-input').value.trim();
            const translation = document.getElementById('translation-input').value.trim();
            const example = document.getElementById('example-input').value.trim();
            const note = document.getElementById('note-input').value.trim();
            
            if (!word || !translation) {
                showNotification('请输入单词和翻译', 'error');
                return;
            }
            
            const newWord = {
                id: Date.now(),
                language: currentLanguage,
                word: word,
                translation: translation,
                example: example,
                note: note,
                status: 'learning', // 默认为学习中
                createdAt: new Date().toISOString()
            };
            
            words.push(newWord);
            saveWords();
            updateWordList();
            updateStatistics();
            
            // 清空输入框
            document.getElementById('word-input').value = '';
            document.getElementById('translation-input').value = '';
            document.getElementById('example-input').value = '';
            document.getElementById('note-input').value = '';
            
            showNotification('单词添加成功', 'success');
        }

        // 更新单词列表
        function updateWordList(filteredWords = null) {
            const wordList = document.getElementById('word-list');
            const wordsToShow = filteredWords || words;
            
            if (wordsToShow.length === 0) {
                wordList.innerHTML = '<p class="text-gray-500 text-center">暂无单词</p>';
                return;
            }
            
            wordList.innerHTML = '';
            
            wordsToShow.forEach(word => {
                const wordCard = document.createElement('div');
                wordCard.className = 'word-card card p-4';
                wordCard.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <div class="flex items-center mb-2">
                                <span class="language-flag" style="background-color: ${getLanguageColor(word.language)};"></span>
                                <h3 class="text-lg font-medium">${word.word}</h3>
                                <span class="learning-status ${word.status === 'learning' ? 'status-learning' : 'status-mastered'} ml-2">
                                    ${word.status === 'learning' ? '学习中' : '已掌握'}
                                </span>
                            </div>
                            <p class="text-gray-700 mb-1">${word.translation}</p>
                            ${word.example ? `<p class="text-gray-500 text-sm mb-1">例句: ${word.example}</p>` : ''}
                            ${word.note ? `<p class="text-gray-500 text-sm">备注: ${word.note}</p>` : ''}
                        </div>
                        <div class="flex space-x-2">
                            <button class="text-indigo-600 hover:text-indigo-800" onclick="playWordSound('${word.id}')">
                                <i class="fas fa-volume-up"></i>
                            </button>
                            <button class="text-blue-600 hover:text-blue-800" onclick="editWord('${word.id}')">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="text-red-600 hover:text-red-800" onclick="deleteWord('${word.id}')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                wordList.appendChild(wordCard);
            });
        }

        // 获取语言颜色
        function getLanguageColor(language) {
            const colors = {
                'thai': '#ED1C24',
                'vietnamese': '#FF0000',
                'japanese': '#BC002D',
                'korean': '#003478',
                'english': '#012169',
                'spanish': '#AA151B'
            };
            return colors[language] || '#4F46E5';
        }

        // 播放单词发音
        function playWordSound(wordId) {
            const word = words.find(w => w.id == wordId);
            if (!word) return;
            
            const utterance = new SpeechSynthesisUtterance(word.word);
            utterance.lang = languageCodeMap[word.language];
            utterance.rate = 0.9; // 稍微慢一点的语速，更清晰
            speechSynthesis.speak(utterance);
        }

        // 编辑单词
        function editWord(wordId) {
            const word = words.find(w => w.id == wordId);
            if (!word) return;
            
            editingWordId = wordId;
            
            document.getElementById('edit-word-input').value = word.word;
            document.getElementById('edit-translation-input').value = word.translation;
            document.getElementById('edit-example-input').value = word.example || '';
            document.getElementById('edit-note-input').value = word.note || '';
            document.querySelector(`input[name="edit-status"][value="${word.status}"]`).checked = true;
            
            document.getElementById('edit-word-modal').classList.remove('hidden');
        }

        // 保存编辑的单词
        function saveEditWord() {
            const word = words.find(w => w.id == editingWordId);
            if (!word) return;
            
            word.word = document.getElementById('edit-word-input').value.trim();
            word.translation = document.getElementById('edit-translation-input').value.trim();
            word.example = document.getElementById('edit-example-input').value.trim();
            word.note = document.getElementById('edit-note-input').value.trim();
            word.status = document.querySelector('input[name="edit-status"]:checked').value;
            
            saveWords();
            updateWordList();
            updateStatistics();
            closeEditWordModal();
            
            showNotification('单词更新成功', 'success');
        }

        // 关闭编辑单词模态框
        function closeEditWordModal() {
            document.getElementById('edit-word-modal').classList.add('hidden');
            editingWordId = null;
        }

        // 删除单词
        function deleteWord(wordId) {
            if (confirm('确定要删除这个单词吗？')) {
                words = words.filter(w => w.id != wordId);
                saveWords();
                updateWordList();
                updateStatistics();
                
                showNotification('单词删除成功', 'success');
            }
        }

        // 搜索单词
        function searchWords() {
            const searchTerm = document.getElementById('word-search').value.trim().toLowerCase();
            
            if (!searchTerm) {
                updateWordList();
                return;
            }
            
            const filteredWords = words.filter(word => 
                word.word.toLowerCase().includes(searchTerm) || 
                word.translation.toLowerCase().includes(searchTerm) ||
                (word.example && word.example.toLowerCase().includes(searchTerm)) ||
                (word.note && word.note.toLowerCase().includes(searchTerm))
            );
            
            updateWordList(filteredWords);
        }

        // 开始学习
        function startStudy() {
            const language = document.getElementById('study-language').value;
            const count = parseInt(document.getElementById('study-count').value);
            const mode = document.getElementById('study-mode').value;
            const status = document.getElementById('study-status').value;
            
            // 筛选单词
            let filteredWords = words;
            
            if (language !== 'all') {
                filteredWords = filteredWords.filter(w => w.language === language);
            }
            
            if (status !== 'all') {
                filteredWords = filteredWords.filter(w => w.status === status);
            }
            
            // 随机选择单词
            studyWords = [];
            const shuffled = [...filteredWords].sort(() => 0.5 - Math.random());
            studyWords = shuffled.slice(0, Math.min(count, shuffled.length));
            
            if (studyWords.length === 0) {
                showNotification('没有符合条件的单词', 'error');
                return;
            }
            
            currentStudyIndex = 0;
            document.getElementById('study-area').classList.remove('hidden');
            showStudyWord();
        }

        // 显示学习单词
        function showStudyWord() {
            const word = studyWords[currentStudyIndex];
            const mode = document.getElementById('study-mode').value;
            
            // 更新进度
            document.getElementById('study-progress').textContent = `${currentStudyIndex + 1}/${studyWords.length}`;
            
            // 重置状态
            document.getElementById('study-translation').classList.add('hidden');
            document.getElementById('study-example').classList.add('hidden');
            document.getElementById('study-note').classList.add('hidden');
            document.getElementById('study-controls').classList.add('hidden');
            document.getElementById('show-answer-btn').classList.remove('hidden');
            
            // 根据模式显示单词
            if (mode === 'foreign-to-chinese' || (mode === 'mixed' && Math.random() > 0.5)) {
                document.getElementById('study-word').textContent = word.word;
                document.getElementById('study-translation').textContent = word.translation;
            } else {
                document.getElementById('study-word').textContent = word.translation;
                document.getElementById('study-translation').textContent = word.word;
            }
            
            if (word.example) {
                document.getElementById('study-example').textContent = `例句: ${word.example}`;
            }
            
            if (word.note) {
                document.getElementById('study-note').textContent = `备注: ${word.note}`;
            }
            
            // 更新学习状态按钮
            if (word.status === 'learning') {
                document.getElementById('mark-learning-btn').classList.add('bg-yellow-200');
                document.getElementById('mark-mastered-btn').classList.remove('bg-green-200');
            } else {
                document.getElementById('mark-learning-btn').classList.remove('bg-yellow-200');
                document.getElementById('mark-mastered-btn').classList.add('bg-green-200');
            }
        }

        // 播放学习单词发音
        function playStudyWordSound() {
            const word = studyWords[currentStudyIndex];
            if (!word) return;
            
            const utterance = new SpeechSynthesisUtterance(word.word);
            utterance.lang = languageCodeMap[word.language];
            utterance.rate = 0.9; // 稍微慢一点的语速，更清晰
            speechSynthesis.speak(utterance);
        }

        // 显示答案
        function showAnswer() {
            document.getElementById('study-translation').classList.remove('hidden');
            document.getElementById('study-example').classList.remove('hidden');
            document.getElementById('study-note').classList.remove('hidden');
            document.getElementById('study-controls').classList.remove('hidden');
            document.getElementById('show-answer-btn').classList.add('hidden');
        }

        // 上一个单词
        function prevWord() {
            if (currentStudyIndex > 0) {
                currentStudyIndex--;
                showStudyWord();
            }
        }

        // 下一个单词
        function nextWord() {
            if (currentStudyIndex < studyWords.length - 1) {
                currentStudyIndex++;
                showStudyWord();
            } else {
                showNotification('学习完成！', 'success');
                exitStudy();
            }
        }

        // 标记单词状态
        function markWordStatus(status) {
            const word = studyWords[currentStudyIndex];
            if (!word) return;
            
            // 更新单词状态
            const originalWord = words.find(w => w.id === word.id);
            if (originalWord) {
                originalWord.status = status;
                saveWords();
                updateStatistics();
            }
            
            // 更新学习状态按钮
            if (status === 'learning') {
                document.getElementById('mark-learning-btn').classList.add('bg-yellow-200');
                document.getElementById('mark-mastered-btn').classList.remove('bg-green-200');
            } else {
                document.getElementById('mark-learning-btn').classList.remove('bg-yellow-200');
                document.getElementById('mark-mastered-btn').classList.add('bg-green-200');
            }
            
            showNotification(`单词已标记为${status === 'learning' ? '学习中' : '已掌握'}`, 'success');
        }

        // 退出学习
        function exitStudy() {
            document.getElementById('study-area').classList.add('hidden');
            studyWords = [];
            currentStudyIndex = 0;
        }

        // 导入数据
        function importData() {
            const fileInput = document.getElementById('import-file');
            const format = document.querySelector('input[name="import-format"]:checked').value;
            
            if (!fileInput.files.length) {
                showNotification('请选择文件', 'error');
                return;
            }
            
            const file = fileInput.files[0];
            const reader = new FileReader();
            
            reader.onload = function(e) {
                try {
                    let data;
                    
                    if (format === 'json') {
                        data = JSON.parse(e.target.result);
                    } else {
                        // CSV格式解析
                        const lines = e.target.result.split('\n');
                        const headers = lines[0].split(',');
                        
                        data = [];
                        for (let i = 1; i < lines.length; i++) {
                            if (!lines[i].trim()) continue;
                            
                            const values = lines[i].split(',');
                            const item = {};
                            
                            headers.forEach((header, index) => {
                                item[header.trim()] = values[index] ? values[index].trim() : '';
                            });
                            
                            data.push(item);
                        }
                    }
                    
                    // 验证数据格式
                    if (!Array.isArray(data)) {
                        throw new Error('数据格式不正确');
                    }
                    
                    // 处理导入的数据
                    let importedCount = 0;
                    
                    data.forEach(item => {
                        if (item.word && item.translation && item.language) {
                            // 检查是否已存在相同的单词
                            const exists = words.some(w => 
                                w.word === item.word && 
                                w.language === item.language
                            );
                            
                            if (!exists) {
                                words.push({
                                    id: Date.now() + importedCount,
                                    language: item.language,
                                    word: item.word,
                                    translation: item.translation,
                                    example: item.example || '',
                                    note: item.note || '',
                                    status: item.status || 'learning',
                                    createdAt: new Date().toISOString()
                                });
                                
                                importedCount++;
                            }
                        }
                    });
                    
                    saveWords();
                    updateWordList();
                    updateStatistics();
                    
                    showNotification(`成功导入 ${importedCount} 个单词`, 'success');
                    fileInput.value = '';
                } catch (error) {
                    showNotification('导入失败: ' + error.message, 'error');
                }
            };
            
            reader.readAsText(file);
        }

        // 导出数据
        function exportData() {
            const format = document.querySelector('input[name="export-format"]:checked').value;
            const language = document.getElementById('export-language').value;
            
            // 筛选数据
            let dataToExport = words;
            
            if (language !== 'all') {
                dataToExport = words.filter(w => w.language === language);
            }
            
            if (dataToExport.length === 0) {
                showNotification('没有可导出的数据', 'error');
                return;
            }
            
            let content, filename, mimeType;
            
            if (format === 'json') {
                content = JSON.stringify(dataToExport, null, 2);
                filename = `words_export_${new Date().toISOString().slice(0, 10)}.json`;
                mimeType = 'application/json';
            } else {
                // CSV格式
                const headers = ['id', 'language', 'word', 'translation', 'example', 'note', 'status', 'createdAt'];
                const csvContent = [
                    headers.join(','),
                    ...dataToExport.map(item => 
                        headers.map(header => `"${item[header] || ''}"`).join(',')
                    )
                ].join('\n');
                
                content = csvContent;
                filename = `words_export_${new Date().toISOString().slice(0, 10)}.csv`;
                mimeType = 'text/csv';
            }
            
            // 创建下载链接
            const blob = new Blob([content], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('数据导出成功', 'success');
        }

        // 删除所有数据
        function deleteAllData() {
            if (confirm('确定要删除所有数据吗？此操作不可恢复！')) {
                words = [];
                saveWords();
                updateWordList();
                updateStatistics();
                
                showNotification('所有数据已删除', 'success');
            }
        }

        // 更新统计数据
        function updateStatistics() {
            // 总单词数
            document.getElementById('total-words').textContent = words.length;
            
            // 学习状态统计
            const learningWords = words.filter(w => w.status === 'learning').length;
            const masteredWords = words.filter(w => w.status === 'mastered').length;
            
            document.getElementById('learning-words').textContent = learningWords;
            document.getElementById('mastered-words').textContent = masteredWords;
            
            // 语言统计
            const languageCounts = {
                'thai': 0,
                'vietnamese': 0,
                'japanese': 0,
                'korean': 0,
                'english': 0,
                'spanish': 0
            };
            
            words.forEach(word => {
                if (languageCounts.hasOwnProperty(word.language)) {
                    languageCounts[word.language]++;
                }
            });
            
            document.getElementById('thai-words').textContent = languageCounts.thai;
            document.getElementById('vietnamese-words').textContent = languageCounts.vietnamese;
            document.getElementById('japanese-words').textContent = languageCounts.japanese;
            document.getElementById('korean-words').textContent = languageCounts.korean;
            document.getElementById('english-words').textContent = languageCounts.english;
            document.getElementById('spanish-words').textContent = languageCounts.spanish;
        }

        // 添加对译文章
        function addTranslation() {
            const title = document.getElementById('translation-title').value.trim();
            const language = document.getElementById('translation-language').value;
            const foreignText = document.getElementById('foreign-text').value.trim();
            const chineseText = document.getElementById('chinese-text').value.trim();
            
            if (!title || !foreignText || !chineseText) {
                showNotification('请填写所有必填字段', 'error');
                return;
            }
            
            const newTranslation = {
                id: Date.now(),
                title: title,
                language: language,
                foreignText: foreignText,
                chineseText: chineseText,
                createdAt: new Date().toISOString()
            };
            
            translations.push(newTranslation);
            saveTranslations();
            updateTranslationList();
            
            // 清空输入框
            document.getElementById('translation-title').value = '';
            document.getElementById('foreign-text').value = '';
            document.getElementById('chinese-text').value = '';
            
            showNotification('对译文章添加成功', 'success');
        }

        // 更新对译文章列表
        function updateTranslationList(filteredTranslations = null) {
            const translationList = document.getElementById('translation-list');
            const translationsToShow = filteredTranslations || translations;
            
            if (translationsToShow.length === 0) {
                translationList.innerHTML = '<p class="text-gray-500 text-center">暂无对译文章</p>';
                return;
            }
            
            translationList.innerHTML = '';
            
            translationsToShow.forEach(translation => {
                const translationCard = document.createElement('div');
                translationCard.className = 'card p-4';
                translationCard.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <div class="flex items-center mb-2">
                                <span class="language-flag" style="background-color: ${getLanguageColor(translation.language)};"></span>
                                <h3 class="text-lg font-medium">${translation.title}</h3>
                            </div>
                            <p class="text-gray-500 text-sm mb-2">${languageMap[translation.language]} · ${formatDate(translation.createdAt)}</p>
                            <div class="translation-pair">
                                <p class="text-gray-700 line-clamp-2">${translation.foreignText}</p>
                                <p class="text-gray-600 line-clamp-2">${translation.chineseText}</p>
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            <button class="text-blue-600 hover:text-blue-800" onclick="viewTranslation('${translation.id}')">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="text-red-600 hover:text-red-800" onclick="deleteTranslationConfirm('${translation.id}')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                translationList.appendChild(translationCard);
            });
        }

        // 查看对译文章
        function viewTranslation(translationId) {
            const translation = translations.find(t => t.id == translationId);
            if (!translation) return;
            
            viewingTranslationId = translationId;
            
            document.getElementById('view-translation-title').textContent = translation.title;
            document.getElementById('view-translation-language').textContent = languageMap[translation.language];
            document.getElementById('view-foreign-text').textContent = translation.foreignText;
            document.getElementById('view-chinese-text').textContent = translation.chineseText;
            
            document.getElementById('view-translation-modal').classList.remove('hidden');
        }

        // 关闭查看对译文章模态框
        function closeViewTranslationModal() {
            document.getElementById('view-translation-modal').classList.add('hidden');
            viewingTranslationId = null;
        }

        // 打开编辑对译文章模态框
        function openEditTranslationModal() {
            const translation = translations.find(t => t.id == viewingTranslationId);
            if (!translation) return;
            
            editingTranslationId = viewingTranslationId;
            
            document.getElementById('edit-translation-title-input').value = translation.title;
            document.getElementById('edit-translation-language').value = translation.language;
            document.getElementById('edit-foreign-text').value = translation.foreignText;
            document.getElementById('edit-chinese-text').value = translation.chineseText;
            
            document.getElementById('view-translation-modal').classList.add('hidden');
            document.getElementById('edit-translation-modal').classList.remove('hidden');
        }

        // 关闭编辑对译文章模态框
        function closeEditTranslationModal() {
            document.getElementById('edit-translation-modal').classList.add('hidden');
            editingTranslationId = null;
        }

        // 保存编辑的对译文章
        function saveEditTranslation() {
            const translation = translations.find(t => t.id == editingTranslationId);
            if (!translation) return;
            
            translation.title = document.getElementById('edit-translation-title-input').value.trim();
            translation.language = document.getElementById('edit-translation-language').value;
            translation.foreignText = document.getElementById('edit-foreign-text').value.trim();
            translation.chineseText = document.getElementById('edit-chinese-text').value.trim();
            
            saveTranslations();
            updateTranslationList();
            closeEditTranslationModal();
            
            showNotification('对译文章更新成功', 'success');
        }

        // 确认删除对译文章
        function deleteTranslationConfirm(translationId) {
            if (confirm('确定要删除这篇对译文章吗？')) {
                deleteTranslation(translationId);
            }
        }

        // 删除对译文章
        function deleteTranslation(translationId) {
            translations = translations.filter(t => t.id != translationId);
            saveTranslations();
            updateTranslationList();
            
            if (viewingTranslationId == translationId) {
                closeViewTranslationModal();
            }
            
            showNotification('对译文章删除成功', 'success');
        }

        // 搜索对译文章
        function searchTranslations() {
            const searchTerm = document.getElementById('translation-search').value.trim().toLowerCase();
            
            if (!searchTerm) {
                updateTranslationList();
                return;
            }
            
            const filteredTranslations = translations.filter(translation => 
                translation.title.toLowerCase().includes(searchTerm) || 
                translation.foreignText.toLowerCase().includes(searchTerm) ||
                translation.chineseText.toLowerCase().includes(searchTerm)
            );
            
            updateTranslationList(filteredTranslations);
        }

        // 格式化日期
        function formatDate(dateString) {
            const date = new Date(dateString);
            return `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')}`;
        }

        // 保存单词到本地存储
        function saveWords() {
            localStorage.setItem('words', JSON.stringify(words));
        }

        // 保存对译文章到本地存储
        function saveTranslations() {
            localStorage.setItem('translations', JSON.stringify(translations));
        }

        // 显示通知
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 ${
                type === 'success' ? 'bg-green-500 text-white' : 
                type === 'error' ? 'bg-red-500 text-white' : 
                'bg-blue-500 text-white'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('opacity-0', 'transition-opacity', 'duration-500');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 500);
            }, 3000);
        }
    </script>
</body>
</html>
